
# MetricsCollector

üìä `MetricsCollector` ‚Äî —ç—Ç–æ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞ C++ –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ª–æ–≥-—Ñ–∞–π–ª. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –º–µ—Ç—Ä–∏–∫, –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é –∑–∞–ø–∏—Å—å –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É –±—É—Ñ–µ—Ä–∞.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–±–æ—Ä —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (CPU, HTTP, RAM –∏ –¥—Ä.)
- –¢–∞–π–º—à—Ç–∞–º–ø –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫ (—á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã)
- –§–æ–Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:  
  ```
  2025-06-01 15:00:01.653 "CPU" 0.97 "HTTP request" 42 "RAM" 6040
  ```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.cpp
‚îú‚îÄ‚îÄ CMakeLists.txt
‚îú‚îÄ‚îÄ HelpersFunctions/
‚îÇ   ‚îú‚îÄ‚îÄ RandomEvent.cpp
‚îÇ   ‚îî‚îÄ‚îÄ RandomEvent.hpp
‚îú‚îÄ‚îÄ MetricsCollector/
‚îÇ   ‚îú‚îÄ‚îÄ IMetric.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Metric.hpp
‚îÇ   ‚îú‚îÄ‚îÄ MetricsCollector.cpp
‚îÇ   ‚îî‚îÄ‚îÄ MetricsCollector.hpp
```

---

## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

- CMake >= 3.10
- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C++17

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:**

```bash
cd Logger        # –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞
mkdir build
cd build
cmake ..
make
```

–°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ `build/`.

---

## üìå –ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

### 1. ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `float`, `long`) –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∞–±–ª–æ–Ω–Ω—ã–π –∫–ª–∞—Å—Å `Metric<T>` –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IMetric`.

### 2. ‚úÖ –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–ø–∏—Å—å
–ú–µ—Ç–æ–¥—ã `add_metric()` –∑–∞—â–∏—â–µ–Ω—ã –º—å—é—Ç–µ–∫—Å–æ–º –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫: –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º `std::thread`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±—É—Ñ–µ—Ä.

### 3. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –±—É—Ñ–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏
–ü–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –º–µ—Ç—Ä–∏–∫ –æ—á–∏—â–∞–µ—Ç—Å—è:
```cpp
metrics.clear();
```
–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è –º–µ—Ç—Ä–∏–∫–∞ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

---

## ‚ñ∂Ô∏è –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞

–§–∞–π–ª `main.cpp` —Å–∏–º—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Å–ª—É—á–∞–π–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫:
```cpp
int main() {
    MetricsCollector collector;
    while (true) {
        add_random_event(collector);
        std::this_thread::sleep_for(std::chrono::milliseconds(1000));
    }
}
```

–í—ã–≤–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `log.txt`, –ø—Ä–∏–º–µ—Ä:
```
2025-06-16 18:12:17.061 "CPU" 1.88 "HTTP request" 131 "RAM" 2578
```

---

## üß© –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º–µ—Ç—Ä–∏–∫—É

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `add_random_event()`

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è add_random_event(MetricsCollector&) –≤ —Ñ–∞–π–ª–µ HelpersFunctions/RandomEvent.cpp.

–û–Ω–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ MetricsCollector, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö;

–ü–æ–¥–¥–µ—Ä–∂–∫—É –º–µ—Ç—Ä–∏–∫ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ (int, double);

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º.

–ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫–∏ `Disk Usage` —Ç–∏–ø–∞ `float`:
```cpp
collector.add_metric(std::make_shared<Metric<float>>("Disk Usage", 35.7f));
```

---
## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License ‚Äî —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ.
